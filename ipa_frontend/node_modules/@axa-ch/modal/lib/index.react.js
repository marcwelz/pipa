import n from"@skatejs/val";import{LitElement as e,css as o,unsafeCSS as t,html as a}from"lit";import{classMap as r}from"lit/directives/class-map.js";import{unsafeHTML as s}from"lit/directives/unsafe-html.js";import i from"@axa-ch/materials/icons/material-design/close.svg";var l=(n,e)=>{const o=n.toLowerCase();return window.customElements.get(o)||window.customElements.define(o,e),o};const c=(n,e,o)=>{const t="string"==typeof e&&e;let a="";return n.forEach((n=>{const r=n instanceof HTMLElement?n.constructor:n,{tagName:s}=r,i=!t&&e[s];if(i){if(!window.customElements.get(s)&&r.versions)throw Error(`'versions' is a reserved class property, but was found in ${s}'s class`);r.versions=i,l(s,r)}let{versions:c}=r;!c&&o&&(c=e[o.constructor.tagName],c[s]=Object.values(c)[0]);const d=t||c[s];a=((n,e)=>{return`${n}-${o=e,`${o}`.replace(/\./g,"-").replace(/[^A-Za-z0-9-]/g,"")}`;var o})(s,d),l(a,class extends r{})})),a},d=(n,e)=>{const o={},t={};let a;return Object.keys(n).forEach((r=>{const s=n[r];let i;const l=e.properties[r]||{},{type:c}=l;switch(i=0===r.indexOf("on")&&r.charAt(2)===r.charAt(2).toUpperCase()?Function:"className"===r?"className":c,i){case"className":case Array:case Object:case Function:case Boolean:a=t;break;default:a=c?t:o}void 0!==s&&(a[r]="style"===r?(n=>Object.keys(n).reduce(((e,o)=>{let t=e;return`${t+=o.split(/(?=[A-Z])/).join("-").toLowerCase()}:${n[o]};`}),""))(s):s)})),{attrs:o,props:t}};const m=n=>!(null==n),p=new Map;[[String,""],[Boolean,!1],[Object,{}],[Array,[]],[Number,0],[Function,()=>{}]].forEach((([n,e])=>{p.set(n,e)}));const u=()=>{},h=n=>{const{constructor:{properties:e}}=n;Object.keys(e).forEach((o=>{const t=e[o],{type:a,converter:r,defaultValue:s}=t;if(!a){if(!r)throw new Error(`<${n.nodeName}> property "${o}" is missing a type!`);return}let i=n[o];m(i)||(i=a===Boolean?n.hasAttribute(o):n.getAttribute(o),m(i)?n[o]=((n,e)=>e===Number?parseFloat(n):e===Function?u:e===Array||e===Object?JSON.parse(n):n)(i,a):void 0===s&&"defaultValue"in t||(n[o]="defaultValue"in t?s:p.get(a)))}))};const f={};class b extends e{inlineStyles(n="styles"){const e=this.getRootNode(),o=f[this.tagName]||new WeakMap,t=o.get(e)||{},a=(t.referenceCount||0)+1;if(t.referenceCount=a,o.set(e,a),f[this.tagName]=o,1===a){this.ownerDocument!==e&&(this._rootNode=e);const o=document.createElement("style");let a=this.constructor[n];const r=this.nodeName.toLowerCase(),s=this.constructor.tagName;r!==s&&(a=a.split(s).join(r)),o.textContent=a,o.dataset.name=this.tagName.toLowerCase();(e instanceof ShadowRoot?e:document.head).appendChild(o),t.style=o}o.set(e,t),f[this.tagName]=o}disconnectedCallback(){super.disconnectedCallback();const n=f[this.tagName];if(!n)return;const e=this._rootNode||this.ownerDocument,o=n.get(e)||{},t=(o.referenceCount||0)-1;if(t<1){n.delete(e);const{style:t}=o;t&&t.parentNode&&t.parentNode.removeChild(t)}else o.referenceCount=t,n.set(e,o)}}class _ extends b{static get tagName(){return"axa-modal"}static get styles(){return o`
      ${t(".o-modal {\n  display: none;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  z-index: 3000;\n  left: 0;\n  top: 0;\n}\n@media (min-width: 36em) {\n  .o-modal {\n    align-items: center;\n  }\n}\n.o-modal--open {\n  display: flex;\n  justify-content: flex-end;\n  flex-flow: column;\n  animation: fade 300ms cubic-bezier(0, 0, 0.2, 1) 1 forwards;\n}\n@keyframes fade {\n  0% {\n    background-color: rgba(0, 0, 0, 0);\n  }\n  100% {\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n}\n@media (min-width: 36em) {\n  .o-modal--open {\n    justify-content: center;\n  }\n}\n.o-modal__container {\n  display: flex;\n  justify-content: flex-end;\n  flex-flow: column;\n  max-height: 100vh;\n  width: 100%;\n  animation: slide-in 300ms cubic-bezier(0, 0, 0.2, 1) 1 forwards;\n}\n@keyframes slide-in {\n  0% {\n    transform: translateY(100vh);\n  }\n  100% {\n    transform: translateY(0%);\n  }\n}\n@media (min-width: 36em) {\n  .o-modal__container {\n    max-height: none;\n    max-width: 780px;\n    margin: 0;\n  }\n}\n@media (min-width: 36em) {\n  .o-modal__container--small {\n    max-width: 500px;\n    margin: 0;\n  }\n}\n.o-modal__upper-close-container {\n  display: flex;\n  justify-content: flex-end;\n  position: relative;\n  min-height: 56px;\n  margin: 8px 8px 0;\n  box-shadow: 0px 1px 8px rgba(0, 0, 0, 0.15);\n  border-radius: 8px 8px 0 0;\n  background-color: #fff;\n}\n@media (min-width: 36em) {\n  .o-modal__upper-close-container {\n    height: auto;\n  }\n}\n.o-modal__upper-close-container--forced {\n  display: none;\n}\n.o-modal__upper-close-container-button {\n  cursor: pointer;\n  border: none;\n  background: transparent;\n  outline: none;\n  color: inherit;\n  font: inherit;\n  line-height: normal;\n  margin: 8px;\n  height: 40px;\n  padding: 8px;\n}\n.o-modal__upper-close-container-button svg {\n  color: #00008f;\n  height: 24px;\n  width: 24px;\n}\n.o-modal__content {\n  max-height: 100%;\n  overflow: auto;\n  padding: 0 28px 28px;\n  margin: 0 8px 8px;\n  background-color: #fff;\n  border-radius: 0 0 8px 8px;\n  box-shadow: 0px 1px 20px rgba(0, 0, 0, 0.15);\n}\n@media (min-width: 36em) {\n  .o-modal__content {\n    max-height: 70vh;\n  }\n}\n.o-modal__content--forced {\n  border-radius: 8px;\n  padding: 28px;\n  margin-top: 8px;\n}\n@media (min-width: 36em) {\n  .o-modal__content--forced {\n    padding: 40px;\n  }\n}\n.o-modal__content--noheader {\n  border-radius: 8px;\n  padding: 0;\n}\n@media (min-width: 36em) {\n  .o-modal__content--noheader {\n    overflow-y: scroll;\n    scrollbar-width: none;\n  }\n  .o-modal__content--noheader::-webkit-scrollbar {\n    display: none;\n  }\n}\n.o-modal__content .o-modal__upper-close-container-button {\n  position: absolute;\n  right: 9px;\n  z-index: 1;\n}\n.o-modal__content .o-modal__upper-close-container-button svg {\n  color: #fff;\n  filter: drop-shadow(1px 2px 3px rgba(0, 0, 0, 0.8));\n}\n@media (min-width: 36em) {\n  .o-modal__content .o-modal__upper-close-container-button svg {\n    color: #00008f;\n    filter: unset;\n  }\n}\n.o-modal__close {\n  display: flex;\n  justify-content: flex-end;\n  flex-flow: column;\n}\n.o-modal__close--background {\n  animation: fadeOut 200ms cubic-bezier(0.4, 0, 1, 1);\n}\n@keyframes fadeOut {\n  0% {\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n  100% {\n    background-color: transparent;\n  }\n}\n.o-modal__close--container {\n  animation: close 200ms cubic-bezier(0.4, 0, 1, 1);\n}\n@keyframes close {\n  0% {\n    transform: translateY(0);\n  }\n  100% {\n    transform: translateY(100vh);\n  }\n}")}
    `}static get properties(){return{open:{type:Boolean},forced:{type:Boolean},small:{type:Boolean},noheader:{type:Boolean},onClose:{type:Function,attribute:!1}}}static get resetHeadingCss(){return"axa-modal[forced] > *:first-child {\n  margin-top: 0 !important;\n}\naxa-modal[forced] > *:last-child {\n  margin-bottom: 0 !important;\n}"}constructor(){super(),h(this)}render(){const{open:n,small:e,forced:o,noheader:t,closeModal:l}=this,c={"o-modal__container":!0,"o-modal__container--small":e},d={"o-modal__content":!0,"o-modal__content--forced":o,"o-modal__content--noheader":t},m={"o-modal__upper-close-container":!0,"o-modal__upper-close-container--forced":o};return a`
      <article class="${r({"o-modal":!0,"o-modal--open":n})}">
        <div class="${r(c)}">
          ${o||t?"":a`
                <div class="${r(m)}">
                  <button
                    class="o-modal__upper-close-container-button"
                    @click="${l}"
                  >
                    ${s(i)}
                  </button>
                </div>
              `}
          <div class="${r(d)}">
            ${t?a`
                  <button
                    class="o-modal__upper-close-container-button"
                    @click="${l}"
                  >
                    ${s(i)}
                  </button>
                `:""}
            <slot></slot>
          </div>
        </div>
      </article>
    `}closeModal(){const n=this.shadowRoot.querySelector("article > div").classList,e=this.shadowRoot.querySelector("article").classList;n.add("o-modal__close--container"),e.add("o-modal__close--background"),setTimeout((()=>{n.remove("o-modal__close--container"),e.remove("o-modal__close--background"),this.removeAttribute("open")}),200),this.onClose(((n,e,o,{bubbles:t=!0,composed:a=!0}={})=>{const r=new CustomEvent(n,{detail:e,bubbles:t,composed:a});return o.dispatchEvent(r),r})("axa-close",null,this))}firstUpdated(){this.inlineStyles("resetHeadingCss"),document.body.addEventListener("click",(n=>{this.mouseCloseHandler(n)})),window.addEventListener("keydown",(n=>{this.keyboardEscapeCloseHandler(n)}))}mouseCloseHandler(n){!this.forced&&n.composedPath()&&n.composedPath()[0]===this.shadowRoot.querySelector(".o-modal--open")&&this.closeModal()}keyboardEscapeCloseHandler(n){this.forced||"Escape"!==n.key&&"Esc"!==n.key&&27!==n.keyCode||this.closeModal()}disconnectedCallback(){document.body.removeEventListener("click",this.handleWindowKeyDown),window.removeEventListener("keydown",this.keyboardEscapeCloseHandler)}}c([_],{"axa-modal":{"axa-modal":"4.0.2"}});var g=(e,o)=>((e,o,t)=>{const{tagName:a}=o,r=t?c([o],t):a,s=r.split("-").map((n=>n.charAt(0).toUpperCase()+n.slice(1))).join(""),i=({children:t,...a})=>{const{attrs:s,props:i}=d(a,o);return n(e)(r,{isReact:!0,attrs:s,...i},t)};return i.displayName=s,i})(e,_,o);export{g as default};
